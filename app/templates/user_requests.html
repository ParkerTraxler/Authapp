{% extends 'base.html' %}
{% block title %}Academic Requests{% endblock %}

{% block content %}

<h1 class="mb-3">Request Management</h1>


<!-- Drop down menu for new requests -->
<div class="dropdown mb-3">
	<button class="btn btn-primary dropdown-toggle" type="button" id="requestDropdown" data-bs-toggle="dropdown" aria-expanded="false">
	  Select a Request Form
	</button>
	<ul class="dropdown-menu" aria-labelledby="requestDropdown">
	  <li><a class="dropdown-item" href="ferpa">FERPA Form</a></li>
	  <li><a class="dropdown-item" href="info_change">Name/SSN Change Form</a></li>
	  <li><a class="dropdown-item" href="medical_withdrawal">Medical Withdrawal Request</a></li>
	  <li><a class="dropdown-item" href="student_drop">Student Drop Request</a></li>
	</ul>
  </div>

<!-- Manage pre-existing requests -->
<h2 class="mb-3">Requests</h2>
<table class="table">
	<thead>
		<tr>
			<th>Status</th>
			<th>Type</th>
			<th>Time Requested</th>
			<th>File</th>
			<th>Revise</th>
		</tr>
	</thead>
	<tbody>
		{% for request in requests %}
		<tr>
			<td><span class="{% if request.status == 'approved' %} text-success
								{% elif request.status == 'pending' %} text-warning
								{% elif request.status == 'draft' %} text-info
								{% elif request.status == 'rejected' %} text-danger
								{% elif request.status == 'returned' %} text-secondary {% endif %}">
			{{ request.status.capitalize() }}</span></td>
			<td>{{ request.request_type.value.capitalize() }}</td>
			<td>{{ request.time }}</td>
			<td><a href="{{ url_for('main.download_file', filename=request.pdf_link) }}" class="btn btn-outline-primary btn-sm">File</a></td>
			<td><a href="{{ url_for('user.edit_request', request_id=request.id) }}" class="btn btn-outline-primary btn-sm">Edit</a></td>
		</tr>
		{% endfor %}
	</tbody>
</table>

{% endblock %}
